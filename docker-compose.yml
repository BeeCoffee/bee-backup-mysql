version: '3.8'

services:
  bee-backup:
    build: .
    container_name: bee-backup
    hostname: bee-backup
    env_file: .env
    volumes:
      - ./backups:/backups
      - ./logs:/logs
    restart: unless-stopped
    healthcheck:
      test: ["CMD", "/scripts/healthcheck.sh"]
      interval: 5m
      timeout: 10s
      retries: 3
      start_period: 30s
    networks:
      - backup-network

networks:
  backup-network:
    driver: bridge

# â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
# ğŸ BEE BACKUP - Como usar
# â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
#
# INICIAR:
#   docker-compose up -d
#
# COMANDOS PRINCIPAIS:
#   docker exec bee-backup backup           # Backup dos bancos do .env
#   docker exec bee-backup backup full      # Backup de TODOS os bancos
#   docker exec bee-backup backup restore   # Backup + restaura no destino
#   docker exec bee-backup restore          # Restaura bancos do .env
#   docker exec bee-backup restore full     # Restaura todos os backups
#   docker exec bee-backup list             # Lista backups
#   docker exec bee-backup test             # Testa conexÃ£o
#   docker exec bee-backup clean            # Remove backups antigos
#
# LOGS:
#   docker logs -f bee-backup
#   docker exec bee-backup tail -f /logs/backup.log
#
# PARAR:
#   docker-compose down
#
# â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
